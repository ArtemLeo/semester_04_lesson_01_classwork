# Урок 1. Налаштування середовища розробки Django

*Відкриті питання на тему минулого уроку та/чи розбір домашньої роботи.*

[1. Тема та цілі поточного уроку](#1-план-уроку)  
[2. Цікаво знати](#2-цікаво-знати)  
[3. Що таке фреймворк](#3-що-таке-фреймворк)  
[4. Фреймворки на Python](#4-фреймворки-на-python)  
[5. Різниця між бібліотекою та фреймворком](#5-різниця-між-бібліотекою-та-фреймворком)  
[6. Віртуальне середовище](#6-віртуальне-середовище)  
[7. Django: структура та виклик команд](#7-django-структура-та-виклик-команд)  
[8. DBeaver](#8-dbeaver)  
[9. Підсумки уроку](#9-підсумки-уроку)  
[10. Домашнє завдання](#10-домашнє-завдання)

*Тема наступного уроку: Розробка першого додатка на Django(html+css), Admin*

<img src="/Images/py_sem4_lesson_01.png" alt="my_projects" width="500">

---

## 1. План уроку:

- Познайомитись з поняттям ***фреймворків*** у Python.
- Дізнатися, що таке ***віртуальне середовище*** та навіщо воно потрібне.
- Розглянути основні ***команди*** для роботи з Django.
- Визначити базові відмінності між ***бібліотекою*** та ***фреймворком***.
- Створити перші моделі даних, виконати міграції та локально запустити сервер
  на своєму комп'ютері.

[Повернутися до початку уроку](#урок-1-налаштування-середовища-розробки-django)

---

## 2. Цікаво знати:

**2.1)** ***База даних*** - це структурований набір даних, який забезпечує
ефективне зберігання, пошук та
керування даними.

- Бази даних можна розділити на ***реляційні*** та ***нереляційні***.
    - **Реляційні** бази даних організовують дані в таблиці з визначеними
      зв’язками
      між таблицями.
    - **Нереляційні** бази даних
      організовують дані в більш гнучкій нетабличній
      структурі.


- ***Таблиця БД*** - це структурований набір інформації, упорядкований в **рядки
  **
  та
  **стовпці**.
    - таблиці використовуються для
      зберігання та керування даними.
    - кожна таблиця в БД має визначену структуру (кількість
      стовпців,
      кожен з яких має **тип** та **назву**), а також набір правил та обмежень,
      які визначають
      спосіб зберігання та
      доступу
      до даних.
    - стовпці в таблиці представляють
      атрибути (характеристики) даних, а рядки - це окремі записи (тобто,
      екземпляри
      цих даних).
    - таблиці є фундаментальною концепцією в реляційних БД і
      використовуються для організації даних в структуру, до якої легко
      надсилати запити
      або маніпулювати даними.


- Бази даних використовуються в широкому діапазоні додатків, від простих
  персональних до великих корпоративних
  систем.
- Переглянути вміст бази даних можна за допомогою:
    - **DBeaver** - це один із найпопулярніших інструментів для роботи з базами
      даних.
    - **SQLite Browser** - це простий інструмент для перегляду SQLite баз даних.
    - **pgAdmin** - використовується для PostgreSQL.
    - **MySQL Workbench** - для роботи з MySQL.
    - **Admin панель** - це вбудований в Django інструмент.

**2.2)** ***ORM (Object Relational Mapping)*** – це техніка відображення
об’єктів у
реляційну базу даних. Взаємодія з БД відбувається без написання SQL-запитів.

**2.3)** ***Кросплатформеність*** – це здатність програми працювати на різних
операційних системах (Windows, MacOS, Linux)
без змін у коді.

[Повернутися до початку уроку](#урок-1-налаштування-середовища-розробки-django)

---

## 3. Що таке фреймворк:

- ***Фреймворк*** – це готовий каркас проєкту, який містить набір інструментів
  та бібліотек, які допомагають
  розробникам пришвидшити створення необхідного застосунку.
    - найбільш популярні Python фреймворки –
      це ***Django, Flask, FastAPI***.
    - фреймворк надає структуру проєкту, та контролює послідовність виконання
      коду.
    - розробники дотримуються визначених правил та використовують інструменти
      фреймворка.
- Переваги фреймворків:
    - стандартизація (тобто, готові підходи до розробки застосунків та найкращі
      практики.)
    - швидкість розробки (менше рутини).
    - безпека (вбудовані механізми захисту)
    - спрощена масштабованість додатка.

[Повернутися до початку уроку](#урок-1-налаштування-середовища-розробки-django)

---

## 4. Фреймворки на Python:

- ***Django*** - це веб-фреймворк, який надає розробникам набір
  інструментів
  для швидкого й ефективного створення масштабованих веб-додатків.
    - він містить ORM для керування базами даних, вбудовану
      автентифікацію користувачів, шаблони для створення динамічних веб-сторінок
      та інші корисні інструменти.
- ***Flask*** - це легкий і гнучкий веб-фреймворк, який часто використовується
  для
  невеликих за масштабованістю веб-додатків.
    - містить мінімум вбудованих функцій, але його можна легко розширити за
      допомогою
      додаткових бібліотек.
- ***Tornado*** - це масштабована та високопродуктивна веб-платформа, яка часто
  використовується для створення
  веб-додатків.
    - включає вбудовану підтримку асинхронних операцій.
- ***Pyramid*** - це веб-фреймворк загального призначення, який добре підходить
  для
  створення складних та масштабних веб-додатків.
    - включає в себе вбудовану підтримку баз даних SQL і NoSQL.
- ***CherryPy*** - це мінімалістичний веб-фреймворк, призначений для розробки
  невеликих і
  швидких веб-додатків.
    - містить вбудований веб-сервер і підтримує протоколи HTTP і HTTPS.
- ***Bottle*** - це легкий і простий у використанні веб-фреймворк, який часто
  використовують для створення невеликих
  веб-додатків або API.
    - включає вбудовану підтримку візуалізації шаблонів,
      завантаження файлів і cookie.

[Повернутися до початку уроку](#урок-1-налаштування-середовища-розробки-django)

---

## 5. Різниця між бібліотекою та фреймворком

- ***Бібліотеки*** - це компоненти **нижчого рівня**, що забезпечують певну
  функціональність, яку можна використовувати, як
  будівельні блоки в проєкті.
    - бібліотека зазвичай виконує одну або декілька невеликих задач.
- ***Фреймворки*** - це компоненти **вищого рівня**, які забезпечують повну
  архітектуру для створення додатків.
    - фреймворк надає готовий каркас архітектури проєкту.

[Повернутися до початку уроку](#урок-1-налаштування-середовища-розробки-django)

---

## 6. Віртуальне середовище

**6.1)** ***Virtual Environment*** - це ізольований простір, в який
встановлюються
необхідні для поточного проєкту версії бібліотек та Python
інтерпретатору.

- такий підхід не дозволяє залежностям різних проєктів **конфліктувати** між
  собою.
- віртуальне оточення дає змогу встановлювати різні версії однієї бібліотеки,
  або
  Python інтерпретатору для окремих проєктів.
- В PyCharm віртуальне середовище створюється разом з новим проєктом.

```python
# Створюємо нове віртуальне середовище вручну:
- 'python -m venv venv' 
```

- Команда **python -m venv** використовується для створення нового віртуального
  середовища.
- Аргумент **venv** визначає назву нового віртуального середовища.
- Після виконання команди буде створено новий каталог **venv**, який
  міститиме нову інсталяцію Python із власним
  набором пакетів та залежностей.

```python
# Необхідно активувати віртуальне середовище:

Windows:
- 'venv\Scripts\activate'

macOS / Linux:
- 'source venv/bin/activate'

# Після активації в консолі з`явиться приставка(venv).
```

**6.2)** ***Pip*** - це популярний менеджер пакетів, який використовується для
встановлення, керування та видалення бібліотек в Python
проєктах.

```python
# Оновлення pip:
- 'python -m pip install --upgrade pip'
```

**6.3)** ***Requirements.txt*** - це текстовий файл зі списком всіх бібліотек,
необхідних для
запуску та роботи проєкту.

- кожна залежність знаходиться в окремому рядку в
  форматі "назва_пакета == номер_версії".
- ***pip freeze > requirements.txt*** - це
  команда для створення файлу **requirements.txt** в середині проєкту.

```python
# Встановлення залежностей з файлу requirements.txt
- 'pip install -r requirements.txt'
```

[Повернутися до початку уроку](#урок-1-налаштування-середовища-розробки-django)

---

### 7. Django: структура та виклик команд

**7.1)** Створюємо новий Django проєкт:

```python
# Інсталяція Django:
- 'pip install django'

# Перевірка версії Django:
- 'python -m django --version'

# Створення нового Django-проєкту:
- 'django-admin startproject PROJECT_NAME .'
# '.' в кінці команди, необхідна для створення проєкту в поточній директорії
```

- Команда створить нову структуру проєкту, яка буде містить наступні файли:

    - ***manage.py***</span> - головний файл керування Django проєктом.
    - ***settings.py*** - файл, який містить
      налаштування проєкту.
    - ***asgi.py*** - файл дозволяє Django обробляти синхронні та асинхронні
      запити.
    - ***urls.py*** - файл використовується для
      маршрутизації URL-адрес додатка, та визначає, які функції або класи (
      views) оброблятимуть
      запити до певних URL-адрес.
    - ***wsgi.py*** - файл, який використовується
      для розгортання проєкту на веб-сервері.

**7.2)** Детально про `manage.py` та `settings.py` файли:

- Ключові команди, які можна запустити за допомогою `manage.py`:
    - **startapp** - створює новий модуль у Django проєкті.
    - **makemigrations** - створює нові файли міграції бази даних на основі змін
      у
      моделях проєкту.
    - **migrate** - застосовує будь-які незавершені міграції до бази даних
      проєкту.
    - **createsuperuser** - створює новий обліковий запис суперкористувача для
      інтерфейсу адміністратора Django.
    - **test** - запускає набір тестів проєкту та звітує про результати.
    - **runserver** - запускає сервер розробки для проєкту.

- Ключові налаштування, які можна додати або змінити в `settings.py`:
    - **DEBUG** - логічне значення, яке вказує, чи ввімкнено режим налагодження.
      Режим налагодження слід використовувати
      лише під час розробки, оскільки він може відкрити конфіденційну інформацію
      та
      зробити програму вразливою до атак.
    - **ALLOWED_HOSTS** - список рядків, який визначає, які імена хостів мають
      доступ до Django проєкту. Це
      функція безпеки, яка допомагає запобігти хакерським атакам.
    - **DATABASES** - словник, який визначає конфігурацію бази даних проєкту.
      Django
      підтримує декілька типів баз даних,
      включаючи PostgreSQL, MySQL та SQLite.
    - **INSTALLED_APPS** - список рядків, що визначає імена програм,
      встановлених у
      проєкті Django.
    - **MIDDLEWARE** - список рядків, що визначає імена класів проміжного
      програмного забезпечення, що використовуються
      проєктом. Middleware модифікує об’єкти запиту та
      відповіді до того, як вони досягнуть функції перегляду.
    - **STATIC_URL** і **STATICFILES_DIRS** - параметри, які визначають, як
      статичні
      файли (CSS, JavaScript або
      зображення) обслуговуються проєктом. STATIC_URL визначає базову URL-адресу
      для
      обслуговування статичних файлів, а
      STATICFILES_DIRS - це список каталогів, де можна знайти статичні файли.
    - **TEMPLATES** - список словників, які визначають механізми шаблонів
      проєкту та
      їхні параметри.

**7.3)** Створюємо новий застосунок всередині Django проєкту:

```python
# Створення нового додатка:
- 'python manage.py startapp APP_NAME'
```

- Команда створює базову структуру каталогів та файлів для нового модуля:
    - **admin.py** - файл для налаштування панелі адміністратора Django.
      Дозволяє
      керувати даними через зручний
      веб-інтерфейс.
    - **apps.py** - файл, який описує конфігурацію додатка Django (наприклад,
      назву додатка).
    - **models.py** - файл для створення моделей даних, які відображають
      структуру
      бази даних. Використовується для
      визначення таблиць, зв'язків між ними, а також методів роботи з даними.
    - **tests.py** - файл для написання модульних тестів, які перевіряють
      функціональність програми. Забезпечує
      автоматизацію тестування для виявлення помилок.
    - **views.py** - файл для створення представлень (views), які обробляють
      HTTP-запити і повертають HTTP-відповіді. Файл
      містить логіку додатка.
    - **urls.py** (створюємо самостійно) файл для маршрутизації, якій містить
      шаблони URL-адрес і визначається, які
      представлення (views) будуть викликатися при запитах до певних URL.

**7.4)** Створивши новий модуль, необхідно додати його до списку *
*INSTALLED_APPS** у
файлі
**settings.py**, щоб підключити цей застосунок до
поточного проєкту.

```python
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    # ...
    'MY_APP',
]
```

**7.5)** Створення моделей.

- ***Моделі*** - це класи, які містять опис об'єктів, їх поля та взаємозв’язки. Моделі визначають структуру бази даних.

```python
# Створення моделей
from django.db import models


# Модель Person для зберігання інформації про людину.
class Person(models.Model):
    first_name = models.CharField(max_length=30)  # Ім'я (до 30 символів)
    last_name = models.CharField(max_length=30)  # Прізвище (до 30 символів)


# Модель Musician для зберігання інформації про музикантів.
class Musician(models.Model):
    first_name = models.CharField(
        max_length=50)  # Ім'я музиканта (до 50 символів)
    last_name = models.CharField(
        max_length=50)  # Прізвище музиканта (до 50 символів)
    instrument = models.CharField(
        max_length=100)  # Інструмент, яким володіє музикант (до 100 символів)


# Модель Album для зберігання інформації про музичні альбоми.
class Album(models.Model):
    artist = models.ForeignKey(Musician,
                               on_delete=models.CASCADE)  # Посилання на музиканта (використовується ForeignKey)
    name = models.CharField(max_length=100)  # Назва альбому (до 100 символів)
    release_date = models.DateField()  # Дата випуску альбому
    num_stars = models.IntegerField()  # Рейтинг альбому у вигляді кількості зірок
```

- Django автоматично створить таблицю в базі даних, на основі опису кожної
  моделі.
- Кожна модель повинна наслідуватись від базового класу `models.Model`, який
  надає весь необхідний функціонал.
- **Типи полів** та **обмеження** визначаються за допомогою класів (CharField,
  IntegerField, DateField, ForeignKey та інших).

**7.6)** Створення **міграцій**. Застосування **міграцій**.

```python
# Створення міграцій:
- 'python manage.py makemigrations'

# Застосування міграцій:
- 'python manage.py migrate'

# Застосування міграцій до конкретного додатку:
- 'python manage.py migrate APP_NAME'
```

- Виконання команди python **makemigrations**, створить нові файли міграції, на
  основі
  будь-яких змін, які були виконані в моделі проєкту.
    - Коли ви вносите зміни в модель (додаєте нове поле або змінюєте
      тип
      існуючого поля), Django створить
      новий файл міграції, що вказує, як необхідно оновити схему бази даних, щоб
      відобразити останні
      зміни.
    - Команда **makemigrations** автоматично створює файли міграції на
      основі змін, які були зроблені в моделях.
    - Команда **migrate** застосовує всі незавершені міграції до бази даних (
      створить таблиці, стовпці або необхідні об’єкти), для
      відповідності поточному
      стану моделей в проєкті.

**7.7)** Створення **адміністратора**.

- Створення суперкористувача в Django дозволяє отримати доступ до *
  *адміністративної панелі**, та керувати додатком через зручний веб-інтерфейс.

```python
# Створення адміністратора
- 'python manage.py createsuperuser'

# URL адреса панелі адміністратора:
- 'http://localhost:8000/admin'
```

**7.8)** Запуск застосунку:

```python
# Запуск локального сервера (за замовчуванням на порту 8000):
- 'python manage.py runserver'

# Для іншого порту:
- 'python manage.py runserver 8080'

# Зупинка сервера:
- 'ctrl + c'
```

- Django запустить веб-сервер на вашій локальній машині, який ви можете
  використовувати для перегляду поточного
  проєкту у вікні браузера.
    - отримати доступ до сервера, можна за
      адресою http://localhost:8000/
      або http://127.0.0.1:8000/.
    - під час роботи сервера, допустимо вносити зміни в код свого проєкту
      та (перезапустивши сторінку) переглядати оновлення у вікні браузера.
    - сервер розробки автоматично виявить зміни у вашому коді та перезавантажить
      сервер.
    - локальний сервер не призначений для використання у
      виробничих середовищах і має використовуватися лише для розробки та
      тестування.

[Повернутися до початку уроку](#урок-1-налаштування-середовища-розробки-django)

---

## 8. DBeaver

- **DBeaver** - це безкоштовний, універсальний інструмент для керування базами даних (
  MySQL, PostgreSQL, Oracle, SQLite та інші).
    - має можливість підключатися до кількох баз даних
      одночасно, виконувати SQL запити, переглядати та редагувати дані.
    - надає зручний інтерфейс,
      який дозволяє переглядати об’єкти бази
      даних та змінювати їх.
    - підтримує розширені функції:  метадані, діаграми та
      плагіни.

[Повернутися до початку уроку](#урок-1-налаштування-середовища-розробки-django)

---

## 9. Підсумки уроку

- Розглянули налаштування середовища розробки Django.
- Познайомились з поняттям фреймворків, їх перевагами та відмінностями від
  бібліотек.
- Вивчили основи роботи з віртуальним середовищем для ізоляції залежностей.
- Освоїли базові команди Django для створення проєкту, додатків, міграцій та
  запуску локального сервера.
- Створили просту модель даних, виконали міграції та підключили додаток до
  проєкту.
- Ознайомилися з ключовими файлами структури Django-проєкту та їх призначенням.
- Навчилися використовувати ORM для роботи з базою даних без написання
  SQL-запитів.
- Дослідили роботу з інструментом DBeaver для управління базами даних.

[Повернутися до початку уроку](#урок-1-налаштування-середовища-розробки-django)

---

## 10. Домашнє завдання

***Завдання 1***: Дати визначення файлам, які входять в структуру Django проєкту
та зрозуміти, які функції виконує кожен з них.

- Файли, які належать до проєкту:
    - manage.py
    - settings.py
    - urls.py
    - wsgi.py
    - asgi.py
- Файли, які належать до застосунку:
    - admin.py
    - apps.py
    - models.py
    - tests.py
    - views.py
    - urls.py

***Завдання 2***: Відповісти на запитання, у чому різниця між наступними
командами:

- **python manage.py makemigrations**
- **python manage.py migrate**
- **python manage.py migrate Market**

***Завдання 3***: Запустити завдання на власному комп’ютері (порт 8080).

***Завдання 4***: Розробити **модель** даних, в якій буде:

- ім’я (максимальна довжина 30 символів)
- прізвище (максимальна довжина 30 символів)
- дата народження
- поточний вік
- адреса пошти (максимальна довжина 100 символів).

```python
class Person(models.Model):
    name = models.CharField(max_length=30)
    surname = models.CharField(max_length=30)
    birthday = models.DateField()
    age = models.IntegerField()
    mail = models.CharField(max_length=100)
```

### Приклад рішення:

```python
# Крок 1: Створити новий проєкт та активувати віртуальне середовище
- 'python - m venv venv'

# Активуємо (Windows)
- 'venv\Scripts\activate'

# або (macOS / Linux)
- 'source venv/bin/activate'

# Крок 2: Встановити Django
- 'pip install django'

# Крок 3: Створити проєкт
- 'django-admin startproject MyProject .'

# Крок 4: Створити додаток (наприклад, `Market`)
- 'python manage.py startapp Market'

# Крок 5: Додати застосунок в `settings.py`
```

- У файлі `MyProject/settings.py` знайти список `INSTALLED_APPS` і додати туди
  `'Market'`:

```python
INSTALLED_APPS = [
    'Market',
    'django.contrib.admin',
    'django.contrib.auth',
    # решта...
]
```

```python
# Крок 6: Створити модель `Person` у `Market/models.py`

from django.db import models


class Person(models.Model):
    name = models.CharField(max_length=30)
    surname = models.CharField(max_length=30)
    birthday = models.DateField()
    age = models.IntegerField()
    mail = models.CharField(max_length=100)


# Крок 7: Створити файли міграцій
- 'python manage.py makemigrations'

# Крок 8: Застосувати міграції
- 'python manage.py migrate'

# Крок 9: Запустити сервер на порту 8080
- 'python manage.py runserver 8080'
```

- В результаті ви отримали проєкт Django із додатком `Market`, в якому є модель
  `Person`.
- Зробили міграції та запустили сервер на порту 8080.

[Повернутися до початку уроку](#урок-1-налаштування-середовища-розробки-django)

---
